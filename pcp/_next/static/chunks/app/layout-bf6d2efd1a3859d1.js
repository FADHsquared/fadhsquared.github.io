(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{9443:function(e,s,n){Promise.resolve().then(n.t.bind(n,1647,23)),Promise.resolve().then(n.bind(n,6853)),Promise.resolve().then(n.t.bind(n,93,23)),Promise.resolve().then(n.t.bind(n,6863,23))},6853:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return g}});var a=n(4552),t=n(4962),c=n(5477),l=n(6125),i=n(5808),r=n(5446),o=n(3521),h=n(704);function d(){let{mutate:e}=(0,o.kY)(),[s,n]=(0,r.useState)(""),[c,l]=(0,r.useState)(""),[i,h]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),p=async n=>{if(n.preventDefault(),u(""),g(!1),c!==i){u("Password does not match Confirm Password");return}try{await t.H.userCreate({name:s,password:c}),e("users"),g(!0)}catch(e){u(e instanceof Error?e.message:"Unknown error")}};return(0,a.jsxs)("form",{onSubmit:p,className:"flex flex-col gap-3",children:[d&&(0,a.jsx)("div",{className:"bg-red-800 px-3 py-1",children:(0,a.jsx)("p",{children:d})}),m&&(0,a.jsx)("div",{className:"bg-green-500 px-3 py-1",children:(0,a.jsx)("p",{children:"Success"})}),(0,a.jsx)("label",{htmlFor:"username",children:"Username"}),(0,a.jsx)("input",{required:!0,id:"username",type:"text",placeholder:"Username",value:s,onChange:e=>n(e.target.value),className:"the-input"}),(0,a.jsx)("label",{htmlFor:"password",children:"Password"}),(0,a.jsx)("input",{required:!0,id:"password",type:"password",placeholder:"Password",value:c,onChange:e=>l(e.target.value),className:"the-input"}),(0,a.jsx)("label",{htmlFor:"confirm-password",children:"Confirm Password"}),(0,a.jsx)("input",{required:!0,id:"confirm-password",type:"password",placeholder:"Confirm Password",value:i,onChange:e=>h(e.target.value),className:"the-input"}),(0,a.jsx)("button",{type:"submit",className:"the-btn",children:"Sign Up"})]})}function u(){let{mutate:e}=(0,o.kY)(),[s,n]=(0,r.useState)(""),[c,l]=(0,r.useState)(""),[i,h]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),m=async n=>{n.preventDefault(),h(""),u(!1);try{await t.H.sessionLogin(s,c),e("session"),e("session/challenges"),u(!0)}catch(e){h(e instanceof Error?e.message:"Unknown error")}};return(0,a.jsxs)("form",{onSubmit:m,className:"flex flex-col gap-3",children:[i&&(0,a.jsx)("div",{className:"bg-red-800 px-3 py-1",children:(0,a.jsx)("p",{children:i})}),d&&(0,a.jsx)("div",{className:"bg-green-500 px-3 py-1",children:(0,a.jsx)("p",{children:"Success"})}),(0,a.jsx)("label",{htmlFor:"username",children:"Username"}),(0,a.jsx)("input",{required:!0,id:"username",type:"text",placeholder:"Username",value:s,onChange:e=>n(e.target.value),className:"the-input"}),(0,a.jsx)("label",{htmlFor:"password",children:"Password"}),(0,a.jsx)("input",{required:!0,id:"password",type:"password",placeholder:"Password",value:c,onChange:e=>l(e.target.value),className:"the-input"}),(0,a.jsx)("button",{type:"submit",className:"the-btn",children:"Sign In"})]})}function m(){let{mutate:e}=(0,o.kY)(),[s,n]=(0,r.useState)(""),[c,l]=(0,r.useState)(!1),i=async()=>{n(""),l(!1);try{await t.H.sessionLogout(),e("session"),e("session/challenges"),l(!0)}catch(e){n(e instanceof Error?e.message:"Unknown error")}};return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)("div",{className:"bg-red-800 px-3 py-1",children:(0,a.jsx)("p",{children:s})}),c&&(0,a.jsx)("div",{className:"bg-green-500 px-3 py-1",children:(0,a.jsx)("p",{children:"Success"})}),(0,a.jsx)("button",{onClick:i,className:"the-btn mr-3 w-full",children:"Yes"})]})}function g(){let{data:e,error:s,isLoading:n}=(0,o.ZP)("session",()=>t.H.sessionUser()),[g,p]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[y,j]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.fC,{children:[(0,a.jsxs)(l.xz,{className:"the-btn group flex select-none items-center gap-3",children:[(0,a.jsx)("div",{className:"text-left",children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Loading..."}),(0,a.jsx)("p",{className:"text-xs",children:"Please wait"})]}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Please log in"}),(0,a.jsx)("p",{className:"text-xs",children:"No credentials"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:null==e?void 0:e.name}),(0,a.jsxs)("p",{className:"text-xs",children:[null==e?void 0:e.points," pts"]})]})}),(0,a.jsx)(i.Z,{className:"transition-transform group-rdx-state-open:rotate-180"})]}),(0,a.jsx)(l.Uv,{children:(0,a.jsxs)(l.VY,{className:"select-none border border-[#1e1e1e]",children:[(0,a.jsx)(l.ck,{children:(0,a.jsx)("button",{onClick:()=>p(!0),className:"the-btn block w-full",children:"Sign In"})}),(0,a.jsx)(l.ck,{children:(0,a.jsx)("button",{onClick:()=>x(!0),className:"the-btn block w-full",children:"Sign Out"})})]})})]}),(0,a.jsx)(c.fC,{open:g,onOpenChange:p,children:(0,a.jsxs)(h.Z,{title:"Sign In",children:[(0,a.jsx)(u,{}),(0,a.jsx)("p",{children:"Don't have an account?"}),(0,a.jsx)("button",{onClick:()=>{p(!1),j(!0)},className:"the-btn block w-full",children:"Sign Up"})]})}),(0,a.jsx)(c.fC,{open:b,onOpenChange:x,children:(0,a.jsx)(h.Z,{title:"Sign Out",description:"Are you sure?",children:(0,a.jsx)(m,{})})}),(0,a.jsx)(c.fC,{open:y,onOpenChange:j,children:(0,a.jsx)(h.Z,{title:"Sign Up",children:(0,a.jsx)(d,{})})})]})}},704:function(e,s,n){"use strict";n.d(s,{Z:function(){return l}});var a=n(4552),t=n(5477),c=n(8723);function l(e){let{title:s,description:n,children:l}=e;return(0,a.jsxs)(t.h_,{children:[(0,a.jsx)(t.aV,{className:"fixed inset-0 z-10 bg-black/50"}),(0,a.jsxs)(t.VY,{className:"fixed left-1/2 top-1/2 z-10 max-h-[calc(100vh-1.5rem)] -translate-x-1/2 -translate-y-1/2 overflow-y-auto bg-[#1e1e1e]",children:[(0,a.jsx)(t.x8,{className:"fixed top-3 right-3",children:(0,a.jsx)(c.Z,{})}),(0,a.jsxs)("div",{className:"the-card space-y-3",children:[s&&(0,a.jsx)(t.Dx,{className:"font-bold",children:s}),n&&(0,a.jsx)(t.dk,{children:n}),l]})]})]})}},4962:function(e,s,n){"use strict";async function a(e,s){let n=await fetch(e,s),a=await c(n);if(!n.ok)throw new l(n.status,n.statusText,null==a?void 0:a.details);return a}async function t(e,s){let n=await fetch(e,s);if(!n.ok){var a;throw new l(n.status,n.statusText,null===(a=await c(n))||void 0===a?void 0:a.details)}}async function c(e){try{return await e.json()}catch(e){if(!(e instanceof SyntaxError))throw e;return null}}n.d(s,{H:function(){return i}});class l extends Error{constructor(e,s,n){super("Error ".concat(e," (").concat(s,")! ").concat(n?"Details: "+n:"No details given"))}}let i=new class{async sessionLogin(e,s){await t("".concat(this.baseUrl,"/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:e,password:s}),credentials:"include"})}async sessionLogout(){await t("".concat(this.baseUrl,"/session/logout"),{method:"POST",credentials:"include"})}async sessionUser(){return await a("".concat(this.baseUrl,"/session"),{credentials:"include"})}async sessionChallenges(){return await a("".concat(this.baseUrl,"/session/challenges"),{credentials:"include"})}async sessionChallenge(e){return await a("".concat(this.baseUrl,"/session/challenges/name/").concat(e),{credentials:"include"})}async sessionChallengeVoteByChallengeName(e){return await a("".concat(this.baseUrl,"/session/challenge-votes/name/").concat(e),{credentials:"include"})}async sessionChallengeSubmissionVoteByChallengeSubmissionId(e){return await a("".concat(this.baseUrl,"/session/challenge-submission-votes/").concat(e),{credentials:"include"})}async userCreate(e){await t("".concat(this.baseUrl,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async userList(){return await a("".concat(this.baseUrl,"/users"))}async userGetByName(e){return await a("".concat(this.baseUrl,"/users/name/").concat(e))}async challengeCreate(e){await t("".concat(this.baseUrl,"/challenges"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}async challengeList(e,s){return await a("".concat(this.baseUrl,"/challenges?tiers=").concat(e,"&sort-by=").concat(s))}async challengeGetByName(e){return await a("".concat(this.baseUrl,"/challenges/name/").concat(e))}async challengeUpdate(e,s){await t("".concat(this.baseUrl,"/challenges/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s),credentials:"include"})}async challengeDelete(e){return await a("".concat(this.baseUrl,"/challenges/").concat(e),{method:"DELETE",credentials:"include"})}async challengeCommentCreate(e){await t("".concat(this.baseUrl,"/challenge-comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}async challengeCommentListByChallengeName(e){return await a("".concat(this.baseUrl,"/challenge-comments/challenge-name/").concat(e))}async challengeVoteCreate(e){await t("".concat(this.baseUrl,"/challenge-votes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}async challengeVoteListByChallengeName(e){return await a("".concat(this.baseUrl,"/challenge-votes/challenge-name/").concat(e))}async challengeVoteDelete(e){return await a("".concat(this.baseUrl,"/challenge-votes/").concat(e),{method:"DELETE",credentials:"include"})}async challengeSubmissionCreate(e){await t("".concat(this.baseUrl,"/challenge-submissions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}async challengeSubmissionListByChallengeName(e){return await a("".concat(this.baseUrl,"/challenge-submissions/challenge-name/").concat(e))}async challengeSubmissionCommentCreate(e){await t("".concat(this.baseUrl,"/challenge-submission-comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}async challengeSubmissionCommentListByChallengeSubmissionId(e){return await a("".concat(this.baseUrl,"/challenge-submission-comments/challenge-submission-id/").concat(e))}async challengeSubmissionVoteCreate(e){await t("".concat(this.baseUrl,"/challenge-submission-votes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})}async challengeSubmissionVoteListBySubmissionId(e){return await a("".concat(this.baseUrl,"/challenge-submission-votes/challenge-submission-id/").concat(e))}async challengeSubmissionVoteDelete(e){return await a("".concat(this.baseUrl,"/challenge-submission-votes/").concat(e),{method:"DELETE",credentials:"include"})}constructor(e){this.baseUrl=e}}("https://pcp.azurewebsites.net")},93:function(){}},function(e){e.O(0,[354,227,522,729,291,744],function(){return e(e.s=9443)}),_N_E=e.O()}]);