import{c as d,g as n,h as w,i as m,j as G,o as z,t as r,S as I,e as L}from"./web.B8iD7Igf.js";var J=r("<h1 class=text-5xl><b>Aim</b> the <b><!$><!/> trigger"),K=r("<p class=text-lg>and hold for <b><!$><!/> seconds!"),O=r('<div class="flex w-full"><div class="h-2 rounded-l bg-green-600"></div><div class="h-2 rounded-r bg-lime-400">'),Q=r('<div class="w-full rounded border-2 border-white"><div class="h-8 bg-gray-50">'),X=r('<div class="w-full space-y-2 px-2 pt-2 text-center"><!$><!/><p class="select-none text-left text-xs text-slate-400">(DEBUG) Frame number: <!$><!/>'),Z=r('<h1 class="text-5xl font-bold">Welcome to GWS!'),ee=r("<p class=text-sm>Gamepad Warmup System"),te=r("<br>"),le=r("<p class=text-lg>Press any gamepad key to start"),ne=r('<h1 class="text-5xl font-bold">'),re=r("<p class=text-lg>");function se(o,g){return Math.random()*(g-o)+o}function k(o,g){const p=Math.ceil(o),C=Math.floor(g);return Math.floor(Math.random()*(C-p)+p)}const u=.03,q=["lt","rt"],E=[2,3,4,5],ae=2;function R(o){return{input:q[k(0,q.length)],value:o,holdTime:E[k(0,E.length)]}}function F(){return se(0+u,1-u)}function oe(){const[o,g]=d(1),[p,C]=d(!0),[W,T]=d(0),[H,N]=d(0),[l,U]=d(R(F())),[A,M]=d(null),[h,_]=d(null),x=()=>l().input==="lt"?W():H();let f=NaN;const b=s=>{g(t=>t+1);const $=navigator.getGamepads()[0];if($){C(!1);const t=$.axes,S=$.buttons;navigator.userAgent.includes("Firefox")?(T((t[4]+1)/2),N((t[5]+1)/2)):(T(S[6].value),N(S[7].value))}if(h()){if(s-h().time>ae*1e3){let t=F();for(;t>=l().value-u&&t<=l().value+u;)t=F();U(R(t)),M(null),_(null)}f=requestAnimationFrame(b);return}if(x()>=l().value-u&&x()<=l().value+u){A()===null?M(s):s-A()>=l().holdTime*1e3&&_({time:s,isSuccess:!0,description:`You reached the target and held for ${l().holdTime} seconds!`}),f=requestAnimationFrame(b);return}A()!==null&&(x()>l().value+u?_({time:s,isSuccess:!1,description:"You overshot"}):_({time:s,isSuccess:!1,description:"You undershot"})),f=requestAnimationFrame(b)};return f=requestAnimationFrame(b),z(()=>cancelAnimationFrame(f)),(()=>{var s=n(X),$=s.firstChild,[t,S]=w($.nextSibling),P=t.nextSibling,V=P.firstChild,Y=V.nextSibling,[j,B]=w(Y.nextSibling);return m(s,G(I,{get when(){return!p()},get fallback(){return[n(Z),n(ee),n(te),n(le)]},get children(){return[G(I,{get when(){return!h()},get fallback(){return[(()=>{var e=n(ne);return m(e,()=>h().isSuccess?"SUCCESS!":"FAIL!"),e})(),(()=>{var e=n(re);return m(e,()=>h().description),e})()]},get children(){return[(()=>{var e=n(J),a=e.firstChild,i=a.nextSibling,c=i.nextSibling,v=c.firstChild,[y,D]=w(v.nextSibling);return y.nextSibling,m(c,()=>l().input==="lt"?"left":"right",y,D),e})(),(()=>{var e=n(K),a=e.firstChild,i=a.nextSibling,c=i.firstChild,[v,y]=w(c.nextSibling);return v.nextSibling,m(i,()=>l().holdTime,v,y),e})()]}}),(()=>{var e=n(O),a=e.firstChild,i=a.nextSibling;return i.style.setProperty("width","6%"),L(c=>(c=`${(l().value-u)*100}%`)!=null?a.style.setProperty("width",c):a.style.removeProperty("width")),e})(),(()=>{var e=n(Q),a=e.firstChild;return L(i=>(i=`${x()*100}%`)!=null?a.style.setProperty("width",i):a.style.removeProperty("width")),e})()]}}),t,S),m(P,o,j,B),s})()}export{oe as default};
