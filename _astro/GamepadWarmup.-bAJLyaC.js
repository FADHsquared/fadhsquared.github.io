import{c as o,g as n,h as w,i as m,j as I,o as K,t as r,S as R,e as k}from"./web.B8iD7Igf.js";var O=r("<h1 class=text-5xl><b>Aim</b> the <b><!$><!/> trigger"),Q=r("<p class=text-lg>and hold for <b><!$><!/> seconds!"),X=r('<div class="flex w-full"><div class="h-2 rounded-l bg-green-600"></div><div class="h-2 rounded-r bg-lime-400">'),Z=r('<div class="w-full rounded border-2 border-white"><div class="h-8 bg-gray-50">'),ee=r('<div class="w-full space-y-2 px-2 pt-2 text-center"><!$><!/><p class="select-none text-left text-xs text-slate-400">(DEBUG) Frame number: <!$><!/>'),te=r('<h1 class="text-5xl font-bold">Welcome to GWS!'),le=r("<p class=text-sm>Gamepad Warmup System"),ne=r("<br>"),re=r("<p class=text-lg>Press any gamepad key to start"),se=r('<h1 class="text-5xl font-bold">'),ae=r("<p class=text-lg>");function ie(u,g){return Math.random()*(g-u)+u}function q(u,g){const p=Math.ceil(u),C=Math.floor(g);return Math.floor(Math.random()*(C-p)+p)}const c=.03,E=["lt","rt"],W=[2,3,4,5],oe=2;function H(u){return{input:E[q(0,E.length)],value:u,holdTime:W[q(0,W.length)]}}function F(){return ie(0+c,1-c)}function ce(){const[u,g]=o(1),[p,C]=o(!0),[U,T]=o(0),[V,N]=o(0),[,L]=o(0),[,M]=o(0),[l,Y]=o(H(F())),[A,P]=o(null),[h,_]=o(null),x=()=>l().input==="lt"?U():V();let f=NaN;const b=s=>{g(t=>t+1);const $=navigator.getGamepads()[0];if($){C(!1);const t=$.axes,S=$.buttons;navigator.userAgent.includes("Firefox")?(T((t[4]+1)/2),N((t[5]+1)/2),L(t[0]),M(t[2])):(T(S[6].value),N(S[7].value),L(t[0]),M(t[2]))}if(h()){if(s-h().time>oe*1e3){let t=F();for(;t>=l().value-c&&t<=l().value+c;)t=F();Y(H(t)),P(null),_(null)}f=requestAnimationFrame(b);return}if(x()>=l().value-c&&x()<=l().value+c){A()===null?P(s):s-A()>=l().holdTime*1e3&&_({time:s,isSuccess:!0,description:`You reached the target and held for ${l().holdTime} seconds!`}),f=requestAnimationFrame(b);return}A()!==null&&(x()>l().value+c?_({time:s,isSuccess:!1,description:"You overshot"}):_({time:s,isSuccess:!1,description:"You undershot"})),f=requestAnimationFrame(b)};return f=requestAnimationFrame(b),K(()=>cancelAnimationFrame(f)),(()=>{var s=n(ee),$=s.firstChild,[t,S]=w($.nextSibling),G=t.nextSibling,j=G.firstChild,B=j.nextSibling,[D,z]=w(B.nextSibling);return m(s,I(R,{get when(){return!p()},get fallback(){return[n(te),n(le),n(ne),n(re)]},get children(){return[I(R,{get when(){return!h()},get fallback(){return[(()=>{var e=n(se);return m(e,()=>h().isSuccess?"SUCCESS!":"FAIL!"),e})(),(()=>{var e=n(ae);return m(e,()=>h().description),e})()]},get children(){return[(()=>{var e=n(O),a=e.firstChild,i=a.nextSibling,d=i.nextSibling,v=d.firstChild,[y,J]=w(v.nextSibling);return y.nextSibling,m(d,()=>l().input==="lt"?"left":"right",y,J),e})(),(()=>{var e=n(Q),a=e.firstChild,i=a.nextSibling,d=i.firstChild,[v,y]=w(d.nextSibling);return v.nextSibling,m(i,()=>l().holdTime,v,y),e})()]}}),(()=>{var e=n(X),a=e.firstChild,i=a.nextSibling;return i.style.setProperty("width","6%"),k(d=>(d=`${(l().value-c)*100}%`)!=null?a.style.setProperty("width",d):a.style.removeProperty("width")),e})(),(()=>{var e=n(Z),a=e.firstChild;return k(i=>(i=`${x()*100}%`)!=null?a.style.setProperty("width",i):a.style.removeProperty("width")),e})()]}}),t,S),m(G,u,D,z),s})()}export{ce as default};
