const p={NORMAL:0,WILDCARD:1,PLACEHOLDER:2};function g(e={}){const o={options:e,rootNode:h(),staticRoutesMap:{}},s=t=>e.strictTrailingSlash?t:t.replace(/\/$/,"")||"/";if(e.routes)for(const t in e.routes)m(o,s(t),e.routes[t]);return{ctx:o,lookup:t=>$(o,s(t)),insert:(t,i)=>m(o,s(t),i),remove:t=>N(o,s(t))}}function $(e,o){const s=e.staticRoutesMap[o];if(s)return s.data;const t=o.split("/"),i={};let n=!1,a=null,r=e.rootNode,c=null;for(let l=0;l<t.length;l++){const u=t[l];r.wildcardChildNode!==null&&(a=r.wildcardChildNode,c=t.slice(l).join("/"));const d=r.children.get(u);if(d!==void 0)r=d;else if(r=r.placeholderChildNode,r!==null)i[r.paramName]=u,n=!0;else break}return(r===null||r.data===null)&&a!==null&&(r=a,i[r.paramName||"_"]=c,n=!0),r?n?{...r.data,params:n?i:void 0}:r.data:null}function m(e,o,s){let t=!0;const i=o.split("/");let n=e.rootNode,a=0;for(const r of i){let c;if(c=n.children.get(r))n=c;else{const l=x(r);c=h({type:l,parent:n}),n.children.set(r,c),l===p.PLACEHOLDER?(c.paramName=r==="*"?`_${a++}`:r.slice(1),n.placeholderChildNode=c,t=!1):l===p.WILDCARD&&(n.wildcardChildNode=c,c.paramName=r.slice(3)||"_",t=!1),n=c}}return n.data=s,t===!0&&(e.staticRoutesMap[o]=n),n}function N(e,o){let s=!1;const t=o.split("/");let i=e.rootNode;for(const n of t)if(i=i.children.get(n),!i)return s;if(i.data){const n=t[t.length-1];if(i.data=null,Object.keys(i.children).length===0){const a=i.parent;a.children.delete(n),a.wildcardChildNode=null,a.placeholderChildNode=null}s=!0}return s}function h(e={}){return{type:e.type||p.NORMAL,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildNode:null}}function x(e){return e.startsWith("**")?p.WILDCARD:e[0]===":"||e==="*"?p.PLACEHOLDER:p.NORMAL}const f=[{$component:{src:"src/routes/[...404].tsx?pick=default&pick=$css",build:()=>import("../_...404_.js"),import:()=>import("../_...404_.js")},path:"/*404",filePath:"/home/sam/Documents/repos/gh-pages-site/src/routes/[...404].tsx"},{$component:{src:"src/routes/index.tsx?pick=default&pick=$css",build:()=>import("../index.js"),import:()=>import("../index.js")},path:"/",filePath:"/home/sam/Documents/repos/gh-pages-site/src/routes/index.tsx"},{$component:{src:"src/routes/minigames.tsx?pick=default&pick=$css",build:()=>import("../minigames.js"),import:()=>import("../minigames.js")},path:"/minigames",filePath:"/home/sam/Documents/repos/gh-pages-site/src/routes/minigames.tsx"},{$component:{src:"src/routes/repos.tsx?pick=default&pick=$css",build:()=>import("../repos.js"),import:()=>import("../repos.js")},path:"/repos",filePath:"/home/sam/Documents/repos/gh-pages-site/src/routes/repos.tsx"},{$component:{src:"src/routes/videos.tsx?pick=default&pick=$css",build:()=>import("../videos.js"),import:()=>import("../videos.js")},path:"/videos",filePath:"/home/sam/Documents/repos/gh-pages-site/src/routes/videos.tsx"},{$component:{src:"src/routes/notes/ideas-are-welcome.tsx?pick=default&pick=$css",build:()=>import("../ideas-are-welcome.js"),import:()=>import("../ideas-are-welcome.js")},path:"/notes/ideas-are-welcome",filePath:"/home/sam/Documents/repos/gh-pages-site/src/routes/notes/ideas-are-welcome.tsx"},{$component:{src:"src/routes/notes/index.tsx?pick=default&pick=$css",build:()=>import("../index2.js"),import:()=>import("../index2.js")},path:"/notes/",filePath:"/home/sam/Documents/repos/gh-pages-site/src/routes/notes/index.tsx"},{$component:{src:"src/routes/notes/snappy-windows-terminal-setup.tsx?pick=default&pick=$css",build:()=>import("../snappy-windows-terminal-setup.js"),import:()=>import("../snappy-windows-terminal-setup.js")},path:"/notes/snappy-windows-terminal-setup",filePath:"/home/sam/Documents/repos/gh-pages-site/src/routes/notes/snappy-windows-terminal-setup.tsx"}],R=P(f.filter(e=>e.$component));function P(e){function o(s,t,i,n){const a=Object.values(s).find(r=>i.startsWith(r.id+"/"));return a?(o(a.children||(a.children=[]),t,i.slice(a.id.length)),s):(s.push({...t,id:i,path:i.replace(/\/\([^)/]+\)/g,"")}),s)}return e.sort((s,t)=>s.path.length-t.path.length).reduce((s,t)=>o(s,t,t.path,t.path),[])}function D(e,o){const s=w.lookup(e);if(s){const t=s.route[`$${o}`];return t===void 0?void 0:{handler:t,params:s.params}}}function k(e){return e.$GET||e.$POST||e.$PUT||e.$PATCH||e.$DELETE}const w=g({routes:f.reduce((e,o)=>{if(!k(o))return e;let s=o.path.replace(/\(.*\)\/?/g,"").replace(/\*([^/]*)/g,(t,i)=>`**:${i}`);if(/:[^/]*\?/g.test(s))throw new Error(`Optional parameters are not supported in API routes: ${s}`);if(e[s])throw new Error(`Duplicate API routes for "${s}" found at "${e[s].route.path}" and "${o.path}"`);return e[s]={route:o},e},{})});export{D as m,R as p};
