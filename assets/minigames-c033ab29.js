import{j as u,d as S,k as v,l as K,n as V,o as O,c as h,g as p,t as b,u as X,e as C,f as w,a as W,F as Y,r as Z,h as Q,p as ee,T as te,M as ne}from"./entry-client-dd6a69e8.js";import{S as re}from"./SectionContainer-e3c80f3e.js";import{B as se}from"./Button-8ed8985b.js";import{c as oe}from"./clientOnly-798d4ce4.js";var ae=e=>typeof e=="function"&&!e.length?e():e;function ce(e,...n){return typeof e=="function"?e(...n):e}var ie=(e,n)=>e.length>0?()=>e(v(n)):e;function le(e,n){let s=0;const t=e.map((o,r)=>S(()=>(s=r,o())));return S(()=>t.map(o=>o())[s],void 0,n)}function de(e,n,s){let t=()=>n;const[o,r]=u(n),c=S(ie(e,()=>t()),n);return[t=le([o,c],s),m=>r(()=>typeof m=="function"?m(v(t)):m)]}var E=(e,n,s)=>{const t=s(e,n);return O(()=>clearInterval(t))},fe=(e,n,s)=>{if(typeof n=="number"){E(e,n,s);return}let t=!1,o=performance.now(),r=0,c=!1;const m=()=>{v(e),o=performance.now(),t=s===setTimeout};V(d=>{if(t)return;const g=n();if(g===!1)return d&&(r+=(performance.now()-o)/d),g;if(d===!1&&(o=performance.now()),c){if(d&&(r+=(performance.now()-o)/d),o=performance.now(),r>=1)r=0,m();else if(r>0){const[_,x]=u(void 0,{equals:!1});return _(),E(()=>{r=0,c=!1,x(),m()},(1-r)*g,setTimeout),g}}return c=!0,E(m,g,s),g})};function ue(e,n,s,t){const[o,r]=u(v(e.bind(void 0,s)),t),c=()=>r(e);return fe(c,n,setInterval),K(c),o}var U=6e4,A=36e5,L=e=>e instanceof Date?e:new Date(e),me=(e,n)=>n.getTime()-e.getTime(),I=e=>{const[n,s]=de(()=>L(ae(e)));return[n,o=>s(r=>L(ce(o,r)))]};function ge(e=U/2){const[n,s]=u(void 0,{equals:!1});return[ue(()=>(n(),new Date),e,void 0,{equals:(o,r)=>o.getTime()===r.getTime()}),s]}function pe(e,n){const[s]=I(e),[t]=I(n);return[S(()=>me(s(),t())),{from:s,to:t}]}function he(e,n=s=>Math.abs(s)<=A?U/2:A/2){const s=typeof n=="function"?()=>n(r()):n,[t,o]=ge(s),[r,{to:c}]=pe(t,e);return[r,{update:o,target:c,now:t}]}var be=(e,n,s=[])=>{const t=new WebSocket(e,n),o=t.send.bind(t);return t.send=r=>t.readyState==1?o(r):s.push(r),t.addEventListener("open",()=>{for(;s.length;)o(s.shift())}),t};const _e=b("<p>Server URL: (Connection: <!#><!/>)"),we=b('<input type="text" class="w-full rounded-lg border-2 border-slate-300 bg-transparent dark:border-slate-600">'),Se=b('<div class="mb-2 flex flex-col items-center rounded-lg bg-slate-100 p-2 dark:bg-slate-700"><p class="text-sm font-bold"><!#><!/> - <!#><!/></p><code class="text-4xl">'),Te=b('<div class="h-60 overflow-y-auto whitespace-pre-wrap break-all rounded-lg bg-slate-200 p-2 dark:bg-slate-700 sm:h-96">'),ve=b('<input type="text" placeholder="message/answer here, send with Enter" class="mt-2 w-full rounded-lg border-2 border-slate-300 bg-transparent dark:border-slate-600">'),xe=b("<div>"),$e=b('<p class="text-center">...or download native client <a href="https://github.com/PixelSam123/wordgames-client/releases" class="font-bold underline">here'),ke=oe(async()=>({default(){const[e,n]=X(),s=()=>e["anagrams-server-url"]??"wss://wordgames4j.azurewebsites.net/ws/anagram/1",[t,o]=u("Not Connected");let r,c;O(()=>{r&&r.close()});const[m,d]=u("WAITING ROUND START!"),[g,_]=u(""),[x,T]=u(""),[y]=he(x,()=>500),[$,N]=u(""),[B,D]=u([]),M=a=>{const{type:i,content:l}=JSON.parse(a.data);switch(i){case"ChatMessage":D(f=>[...f,l]),setTimeout(()=>{c&&(c.scrollTop=c.scrollHeight)});break;case"OngoingRoundInfo":T(l.round_finish_time),d("PLEASE GUESS!"),_(l.word_to_guess);break;case"FinishedRoundInfo":T(l.to_next_round_time),d("TIME'S UP! THE ANSWER:"),_(l.word_answer);break;case"FinishedGame":T(""),d("WAITING ROUND START!"),_("")}},R=()=>{o("Open")},G=()=>{t()==="Not Connected"||t()==="Closed"?(r=be(s()),o("Connecting"),r.addEventListener("open",R),r.addEventListener("message",M)):(o("Closing"),r?.removeEventListener("open",R),r?.removeEventListener("message",M),r?.close(),o("Closed"),T(""),d("WAITING ROUND START!"),_(""))},P=a=>{a.key==="Enter"&&($()==="/clear"?D([]):r?.send($()),N(""))};return[(()=>{const a=p(_e),i=a.firstChild,l=i.nextSibling,[f,k]=C(l.nextSibling);return f.nextSibling,w(a,()=>typeof t>"u"?"Not Connected":t(),f,k),a})(),(()=>{const a=p(we);return a.addEventListener("change",i=>n("anagrams-server-url",i.currentTarget.value)),W(()=>a.value=s()),a})(),h(se,{class:"my-2",onClick:G,get children(){return typeof t<"u"&&t()==="Open"?"Disconnect":"Connect"}}),(()=>{const a=p(Se),i=a.firstChild,l=i.firstChild,[f,k]=C(l.nextSibling),F=f.nextSibling,H=F.nextSibling,[q,j]=C(H.nextSibling),z=i.nextSibling;return w(i,m,f,k),w(i,(()=>{const J=S(()=>!!isNaN(y()));return()=>J()?"":`${Math.max(0,y()/1e3).toFixed(1)} seconds`})(),q,j),w(z,g),a})(),(()=>{const a=p(Te),i=c;return typeof i=="function"?ee(i,a):c=a,w(a,h(Y,{get each(){return B()},children:l=>(()=>{const f=p(xe);return w(f,l),f})()})),a})(),(()=>{const a=p(ve);return a.addEventListener("change",i=>N(i.currentTarget.value)),a.$$keyup=P,W(()=>a.value=$()),Z(),a})()]}}));function Ce(){return[h(re,{title:"ANAGRAMS",class:"mt-6 max-w-screen-sm self-center",get children(){return h(ke,{})}}),p($e)]}Q(["keyup"]);function Me(){return[h(te,{children:"PixelSamz - Minigames"}),h(ne,{name:"description",content:"Play some in-browser multiplayer minigames!"}),h(Ce,{})]}export{Me as default};
