<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>FADHsquared</title>

    <meta
      name="description"
      content="Currently full of placeholders but you can come and have a look!"
    />
    <meta name="keywords" content="downloads, fadh, portfolio" />

    <link rel="stylesheet" href="css/tailwind.css" />
    <link rel="stylesheet" href="css/master.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />
    <style>
      /* Hero header */
      header {
        height: calc(100vh - 3.5rem);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        color: white;
        text-align: center;
      }
      #header-image {
        position: fixed;
        top: 0;
        width: 100vw;
        height: 100vh;
        object-fit: cover;
        z-index: -1;
        -webkit-user-select: none;
        user-select: none;
      }
      /* Featured videos section */
      .thumbnail-info-group img {
        margin-right: 0.5rem;
        width: 128px;
        height: 72px;
        min-width: 128px;
        min-height: 72px;
        object-fit: cover;
      }
    </style>
  </head>
  <body class="bg-white dark:bg-gray-800">
    <!-- Hero header -->
    <header>
      <div class="w-full justify-self-start flex justify-between select-none">
        <button
          class="
            ml-3
            px-2
            pb-4
            text-white
            overflow-hidden
            no-underline
            text-7xl
            transition-all
            hover:bg-gray-50 hover:bg-opacity-20
            rounded
          "
          onclick="cycleHeader('prev')"
        >
          &lsaquo;
        </button>
        <button
          class="
            mr-3
            px-2
            pb-4
            text-white
            overflow-hidden
            no-underline
            text-7xl
            transition-all
            hover:bg-gray-50 hover:bg-opacity-20
            rounded
          "
          onclick="cycleHeader('next')"
        >
          &rsaquo;
        </button>
      </div>
      <div
        class="
          mt-14
          mx-2
          mb-3
          p-3
          rounded
          bg-gray-900 bg-opacity-70
          backdrop-filter backdrop-blur-sm
        "
      >
        <h1 class="text-3xl uppercase" id="header-title">Header Title</h1>
        <p class="mt-2">
          <span id="header-description">Header Description</span>
          <a id="header-link" class="underline" href="#">Read article...</a>
        </p>
      </div>
      <div id="header-radio-button-group" class="mb-3 select-none">
        <input
          class="mx-0.5 filter grayscale"
          type="radio"
          name="header-radio-button"
          onclick="switchHeader(0);"
        />
        <input
          class="mx-0.5 filter grayscale"
          type="radio"
          name="header-radio-button"
          onclick="switchHeader(1);"
        />
        <input
          class="mx-0.5 filter grayscale"
          type="radio"
          name="header-radio-button"
          onclick="switchHeader(2);"
        />
        <input
          class="mx-0.5 filter grayscale"
          type="radio"
          name="header-radio-button"
          onclick="switchHeader(3);"
        />
      </div>
    </header>
    <nav
      class="
        sticky
        top-0
        h-14
        sm:w-max
        sm:m-auto
        flex
        justify-between
        items-center
        bg-gray-50 bg-opacity-90
        dark:bg-gray-900 dark:bg-opacity-90
        text-black
        dark:text-white
        sm:rounded
        shadow
        backdrop-filter backdrop-blur
      "
    >
      <div class="flex items-center flex-wrap">
        <a class="w-14 h-14" href="#"
          ><img
            class="w-14 h-14 sm:rounded-l"
            src="resources/images/fadhsquared-logo.png"
            alt="FADHsquared logo"
        /></a>
        <a class="ml-6 no-underline hover:underline" href="html/second-site-test.html">Updates</a>
        <a class="ml-6 no-underline hover:underline" href="#">Downloads</a>
        <a class="ml-6 no-underline hover:underline" href="#">Misc.</a>
      </div>
      <button class="h-6 mx-4 border-none active:text-gray-500" onclick="toggleDarkMode()">
        <span class="material-icons-outlined text-2xl">dark_mode</span>
      </button>
    </nav>
    <main class="p-4 bg-white dark:bg-gray-800 dark:text-gray-200">
      <!-- VSCode pro tip for IntelliJ look -->
      <section id="pro-tip">
        <h2 class="text-center text-2xl">Pro tip: IntelliJ editor look in VS Code</h2>
        <div class="w-8 h-1 mx-auto mt-2 rounded-sm bg-black dark:bg-gray-200"></div>
        <div id="pro-tip-textarea-container" class="flex flex-wrap justify-center">
          <embed
            src="html/fake-windows/font-size-13.html"
            type="text/html"
            width="484px"
            height="257px"
          />
          <embed
            src="html/fake-windows/font-size-13.5.html"
            type="text/html"
            width="484px"
            height="257px"
          />
          <embed
            src="html/fake-windows/font-size-14.html"
            type="text/html"
            width="484px"
            height="257px"
          />
        </div>
      </section>
      <!-- Featured videos section -->
      <section class="min-w-0 overflow-x-auto">
        <h2 class="text-center text-2xl">Latest Videos</h2>
        <div class="w-8 h-1 mx-auto my-2 rounded-sm bg-black dark:bg-gray-200"></div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3 class="text-lg font-bold hover:underline active:text-gray-500">
                Video Title 1
              </h3></a
            >
            <p class="text-justify">Video Description 1</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3 class="text-lg font-bold hover:underline active:text-gray-500">
                Video Title 2
              </h3></a
            >
            <p class="text-justify">Video Description 2</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3 class="text-lg font-bold hover:underline active:text-gray-500">
                Video Title 3
              </h3></a
            >
            <p class="text-justify">Video Description 3</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3 class="text-lg font-bold hover:underline active:text-gray-500">
                Video Title 4
              </h3></a
            >
            <p class="text-justify">Video Description 4</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3 class="text-lg font-bold hover:underline active:text-gray-500">
                Video Title 5
              </h3></a
            >
            <p class="text-justify">Video Description 5</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3 class="text-lg font-bold hover:underline active:text-gray-500">
                Video Title 6
              </h3></a
            >
            <p class="text-justify">Video Description 6</p>
          </div>
        </div>
      </section>
    </main>
    <script>
      // Comment structure: Comments describe code below them.
      "use strict";
      const body = document.body;

      // Grabbing & displaying six latest published videos from the YouTube channel
      const thumbnailInfoGroup = body.getElementsByClassName("thumbnail-info-group");
      fetch(
        "https://api.allorigins.win/raw?url=https://www.youtube.com/feeds/videos.xml?channel_id=UCkIkjfzUY-32W9K5L56p9jA"
      )
        .then((response) => response.text())
        .then((text) => new DOMParser().parseFromString(text, "text/xml"))
        .then((youtubeFeedXml) => {
          const youtubeFeedEntry = youtubeFeedXml.getElementsByTagName("entry");
          for (let index = 0; index < thumbnailInfoGroup.length; index++) {
            // Replace title
            thumbnailInfoGroup[index].getElementsByTagName("h3")[0].innerText =
              youtubeFeedEntry[index].getElementsByTagName("title")[0].textContent;
            // Replace description
            thumbnailInfoGroup[index].getElementsByTagName("p")[0].innerText =
              youtubeFeedEntry[index].getElementsByTagName("media:description")[0].textContent;
            // Replace link
            thumbnailInfoGroup[index].getElementsByTagName("a")[0].href = youtubeFeedEntry[index]
              .getElementsByTagName("link")[0]
              .getAttribute("href");
            // Replace thumbnail
            thumbnailInfoGroup[index].getElementsByTagName("img")[0].src = youtubeFeedEntry[index]
              .getElementsByTagName("media:thumbnail")[0]
              .getAttribute("url");
          }
        });
      // Preload images for hero header
      function loadHeaderImage(number) {
        const headerImage = new Image();
        fetch("resources/header-text.json")
          .then((response) => response.json())
          .then((headerTextObject) => {
            headerImage.src = headerTextObject[number].imageURL;
          });
        headerImage.id = "header-image";
        headerImage.setAttribute("title", "Header image");
        return headerImage;
      }
      const headerImages = [];
      for (let index = 0; index < 4; index++) {
        headerImages[index] = loadHeaderImage(index);
      }
      /* Function for switching the hero header image (animated with a smooth transition), title and description.
      Bound to radio buttons at the bottom of the header. */
      const headerCycleRadioButtons = document
        .getElementById("header-radio-button-group")
        .getElementsByTagName("input");
      let headerElement = document.getElementById("header-image");
      let currentHeaderNumber;
      let animationIsOngoing = false;
      function switchHeader(headerNumber, animationDuration = 300) {
        // Fix NaN header image number stored in sessionStorage on webpage first load
        if (isNaN(headerNumber)) {
          headerNumber = 0;
        }
        if (animationIsOngoing) {
          headerCycleRadioButtons[currentHeaderNumber].checked = true;
        } else if (headerNumber != currentHeaderNumber) {
          currentHeaderNumber = headerNumber;
          headerCycleRadioButtons[headerNumber].checked = true;
          // Switch title and description
          fetch("resources/header-text.json")
            .then((response) => response.json())
            .then((headerTextObject) => {
              document.getElementById("header-title").textContent =
                headerTextObject[headerNumber].title;
              document.getElementById("header-description").textContent =
                headerTextObject[headerNumber].description;
              document.getElementById("header-link").href =
                headerTextObject[headerNumber].articleURL;
            });
          // Switch header image
          const headerImage = headerImages[headerNumber];
          body.getElementsByTagName("header")[0].appendChild(headerImage);
          animationIsOngoing = true;
          headerImage.animate(
            {
              opacity: [0, 1],
              easing: ["ease-out"],
            },
            animationDuration
          );
          setTimeout(() => {
            try {
              headerElement.parentNode.removeChild(headerElement);
            } catch (TypeError) {
              console.log(
                "Header element can't be removed because it does not exist yet (page just loaded/refreshed. This code will be changed later)"
              );
            }
            headerElement = document.getElementById("header-image");
            animationIsOngoing = false;
          }, animationDuration);
          sessionStorage.currentHeaderImage = String(headerNumber);
        }
      }
      switchHeader(parseInt(sessionStorage.currentHeaderImage), 0);
      /* Function for cycling to the previous or the next hero header image, title and description.
      Bound to next and previous buttons above the header title.
      Calls the switchHeader function above. */
      function cycleHeader(cycleTo) {
        let headerNumber = currentHeaderNumber;
        switch (cycleTo) {
          case "next":
            headerNumber += 1;
            break;
          case "prev":
            headerNumber -= 1;
            break;
        }
        if (headerNumber > 3) {
          headerNumber = 0;
        } else if (headerNumber < 0) {
          headerNumber = 3;
        }
        switchHeader(headerNumber);
      }
    </script>
    <script src="js/main.js"></script>
  </body>
</html>
