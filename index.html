<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>FADHsquared</title>

    <meta
      name="description"
      content="Currently full of placeholders but you can come and have a look!"
    />
    <meta name="keywords" content="downloads, fadh, portfolio" />

    <link rel="stylesheet" href="css/tailwind.css" />
    <link rel="stylesheet" href="css/master.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />
    <style>
      /* Hero header */
      header {
        height: calc(100vh - 3.5rem);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        color: white;
        text-align: center;
      }
      #header-image {
        position: fixed;
        top: 0;
        width: 100vw;
        height: 100vh;
        object-fit: cover;
        z-index: -1;
        -webkit-user-select: none;
        user-select: none;
      }
      /* Featured videos section */
      .thumbnail-info-group img {
        margin-right: 0.5rem;
        width: 128px;
        height: 72px;
        min-width: 128px;
        min-height: 72px;
        object-fit: cover;
      }
    </style>
  </head>
  <body class="bg-white dark:bg-gray-800">
    <!-- Hero header -->
    <header>
      <div class="w-full justify-self-start flex justify-between select-none">
        <button
          class="
            ml-3
            px-2
            pb-4
            text-white
            overflow-hidden
            no-underline
            text-7xl
            transition-all
            hover:bg-gray-50 hover:bg-opacity-20
            rounded
          "
          onclick="cycleHeader('prev')"
        >
          &lsaquo;
        </button>
        <button
          class="
            mr-3
            px-2
            pb-4
            text-white
            overflow-hidden
            no-underline
            text-7xl
            transition-all
            hover:bg-gray-50 hover:bg-opacity-20
            rounded
          "
          onclick="cycleHeader('next')"
        >
          &rsaquo;
        </button>
      </div>
      <h1 class="mt-14 mx-2 text-3xl uppercase" id="header-title">
        Header Title
      </h1>
      <p class="mx-2 mt-2 mb-4" id="header-description">Header Description</p>
      <div id="header-content-bar" class="mb-4 select-none">
        <input
          class="mx-0.5 filter grayscale"
          type="radio"
          name="header-content-chooser"
          onclick="switchHeader(0);"
        />
        <input
          class="mx-0.5 filter grayscale"
          type="radio"
          name="header-content-chooser"
          onclick="switchHeader(1);"
        />
        <input
          class="mx-0.5 filter grayscale"
          type="radio"
          name="header-content-chooser"
          onclick="switchHeader(2);"
        />
        <input
          class="mx-0.5 filter grayscale"
          type="radio"
          name="header-content-chooser"
          onclick="switchHeader(3);"
        />
      </div>
    </header>
    <nav
      class="
        sticky
        top-0
        h-14
        sm:w-max
        sm:m-auto
        flex
        justify-between
        items-center
        bg-gray-50 bg-opacity-90
        dark:bg-gray-900 dark:bg-opacity-90
        text-black
        dark:text-white
        sm:rounded
        shadow
        backdrop-filter backdrop-blur
      "
    >
      <div class="flex items-center flex-wrap">
        <a class="w-14 h-14" href="#"
          ><img
            class="w-14 h-14 sm:rounded-l"
            src="resources/images/fadhsquared-logo.png"
            alt="FADHsquared logo"
        /></a>
        <a
          class="ml-6 no-underline hover:underline"
          href="html/second-site-test.html"
          >Updates</a
        >
        <a class="ml-6 no-underline hover:underline" href="#">Downloads</a>
        <a class="ml-6 no-underline hover:underline" href="#">Misc.</a>
      </div>
      <button
        class="h-6 mx-4 border-none active:text-gray-500"
        onclick="toggleDarkMode()"
      >
        <span class="material-icons-outlined text-2xl">dark_mode</span>
      </button>
    </nav>
    <main class="p-4 bg-white dark:bg-gray-800 dark:text-gray-200">
      <!-- VSCode pro tip for IntelliJ look -->
      <section id="pro-tip">
        <h2 class="text-center text-2xl">
          Pro tip: IntelliJ editor look in VS Code
        </h2>
        <div
          class="w-8 h-1 mx-auto mt-2 rounded-sm bg-black dark:bg-gray-200"
        ></div>
        <div
          id="pro-tip-textarea-container"
          class="flex flex-wrap justify-center"
        >
          <embed
            src="html/fake-windows/font-size-13.html"
            type="text/html"
            width="484px"
            height="257px"
          />
          <embed
            src="html/fake-windows/font-size-13.5.html"
            type="text/html"
            width="484px"
            height="257px"
          />
          <embed
            src="html/fake-windows/font-size-14.html"
            type="text/html"
            width="484px"
            height="257px"
          />
        </div>
      </section>
      <!-- Featured videos section -->
      <section class="min-w-0 overflow-x-auto">
        <h2 class="text-center text-2xl">Latest Videos</h2>
        <div
          class="w-8 h-1 mx-auto my-2 rounded-sm bg-black dark:bg-gray-200"
        ></div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3
                class="text-lg font-bold hover:underline active:text-gray-500"
              >
                Video Title 1
              </h3></a
            >
            <p class="text-justify">Video Description 1</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3
                class="text-lg font-bold hover:underline active:text-gray-500"
              >
                Video Title 2
              </h3></a
            >
            <p class="text-justify">Video Description 2</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3
                class="text-lg font-bold hover:underline active:text-gray-500"
              >
                Video Title 3
              </h3></a
            >
            <p class="text-justify">Video Description 3</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3
                class="text-lg font-bold hover:underline active:text-gray-500"
              >
                Video Title 4
              </h3></a
            >
            <p class="text-justify">Video Description 4</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3
                class="text-lg font-bold hover:underline active:text-gray-500"
              >
                Video Title 5
              </h3></a
            >
            <p class="text-justify">Video Description 5</p>
          </div>
        </div>
        <div
          class="
            thumbnail-info-group
            my-2
            flex
            rounded
            hover:bg-gray-50
            dark:hover:bg-gray-900
            hover:shadow
          "
        >
          <img alt="thumbnail" />
          <div>
            <a href="#" target="_blank"
              ><h3
                class="text-lg font-bold hover:underline active:text-gray-500"
              >
                Video Title 6
              </h3></a
            >
            <p class="text-justify">Video Description 6</p>
          </div>
        </div>
      </section>
    </main>
    <script>
      "use strict";
      const body = document.body;

      function loadHeaderImage(number) {
        const headerImage = new Image();
        fetch("resources/header-text.json")
          .then((response) => response.json())
          .then((headerTextObject) => {
            headerImage.src = headerTextObject[number].imageURL;
          });
        headerImage.id = "header-image";
        headerImage.setAttribute("title", "Header image");
        return headerImage;
      }
      const headerImages = [];
      headerImages[0] = loadHeaderImage(0);
      headerImages[1] = loadHeaderImage(1);
      headerImages[2] = loadHeaderImage(2);
      headerImages[3] = loadHeaderImage(3);

      function replaceTitleAndDescription(
        xmlSource,
        classesToReplace,
        elementToReplace,
        replaceSourceElement
      ) {
        for (let index = 0; index < classesToReplace.length; index++) {
          classesToReplace[index]
            .getElementsByTagName("div")[0]
            .getElementsByTagName(elementToReplace)[0].innerText = xmlSource
            .getElementsByTagName("entry")
            [index].getElementsByTagName(replaceSourceElement)[0].textContent;
        }
      }
      fetch(
        "https://api.allorigins.win/raw?url=https://www.youtube.com/feeds/videos.xml?channel_id=UCkIkjfzUY-32W9K5L56p9jA"
      )
        .then((response) => response.text())
        .then((text) => new DOMParser().parseFromString(text, "text/xml"))
        .then((youtubeFeedXml) => {
          const thumbnailInfoGroup = body.getElementsByClassName(
            "thumbnail-info-group"
          );
          replaceTitleAndDescription(
            youtubeFeedXml,
            thumbnailInfoGroup,
            "h3",
            "title"
          );
          replaceTitleAndDescription(
            youtubeFeedXml,
            thumbnailInfoGroup,
            "p",
            "media:description"
          );
          for (let index = 0; index < thumbnailInfoGroup.length; index++) {
            // Replace links
            thumbnailInfoGroup[index]
              .getElementsByTagName("div")[0]
              .getElementsByTagName("a")[0].href = youtubeFeedXml
              .getElementsByTagName("entry")
              [index].getElementsByTagName("link")[0]
              .getAttribute("href");
            // Replace thumbnails
            thumbnailInfoGroup[index].getElementsByTagName("img")[0].src =
              youtubeFeedXml
                .getElementsByTagName("entry")
                [index].getElementsByTagName("media:thumbnail")[0]
                .getAttribute("url");
          }
        });

      const headerCycleButtons = document
        .getElementById("header-content-bar")
        .getElementsByTagName("input");
      let headerElement = document.getElementById("header-image");

      function replaceHeaderImage(headerImage, animationDuration) {
        body.getElementsByTagName("header")[0].appendChild(headerImage);
        headerImage.animate(
          {
            opacity: [0, 1],
            easing: ["ease-out"],
          },
          animationDuration
        );
        setTimeout(() => {
          try {
            headerElement.parentNode.removeChild(headerElement);
          } catch (TypeError) {
            console.log(
              "Header element can't be removed because it does not exist yet (page just loaded/refreshed. This code will be changed later)"
            );
          }
        }, animationDuration);
        setTimeout(
          () => (headerElement = document.getElementById("header-image")),
          animationDuration
        );
      }

      let currentHeaderNumber;
      function switchHeader(headerNumber, animationDuration = 300) {
        if (isNaN(headerNumber)) {
          headerNumber = 0;
        }
        if (headerNumber != currentHeaderNumber) {
          currentHeaderNumber = headerNumber;
          headerCycleButtons[headerNumber].checked = true;
          fetch("resources/header-text.json")
            .then((response) => response.json())
            .then((headerTextObject) => {
              document.getElementById("header-title").textContent =
                headerTextObject[headerNumber].title;
              document.getElementById("header-description").textContent =
                headerTextObject[headerNumber].description;
            });
          switch (headerNumber) {
            case 0:
              sessionStorage.currentHeaderImage = "0";
              replaceHeaderImage(headerImages[0], animationDuration);
              break;
            case 1:
              sessionStorage.currentHeaderImage = "1";
              replaceHeaderImage(headerImages[1], animationDuration);
              break;
            case 2:
              sessionStorage.currentHeaderImage = "2";
              replaceHeaderImage(headerImages[2], animationDuration);
              break;
            case 3:
              sessionStorage.currentHeaderImage = "3";
              replaceHeaderImage(headerImages[3], animationDuration);
              break;
          }
        }
      }
      switchHeader(parseInt(sessionStorage.currentHeaderImage), 0);
      function cycleHeader(cycleTo) {
        let headerNumber = currentHeaderNumber;
        switch (cycleTo) {
          case "next":
            headerNumber += 1;
            break;
          case "prev":
            headerNumber -= 1;
            break;
        }
        if (headerNumber > 3) {
          headerNumber = 0;
        } else if (headerNumber < 0) {
          headerNumber = 3;
        }
        switchHeader(headerNumber);
        currentHeaderNumber = headerNumber;
      }
    </script>
    <script src="js/main.js"></script>
  </body>
</html>
