<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>FADHsquared</title>

    <meta
      name="description"
      content="Currently full of placeholders but you can come and have a look!"
    />
    <meta name="keywords" content="downloads, fadh, portfolio" />

    <link rel="stylesheet" href="css/tailwind.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />
  </head>
  <body class="bg-white dark:bg-gray-800">
    <!-- Hero header -->
    <header
      class="h-[calc(100vh-3.5rem)] flex flex-col items-center justify-end text-white text-center"
    >
      <div
        id="header-cycle-button-container"
        class="w-full justify-self-start flex justify-between select-none text-7xl text-yellow-400"
      >
        <button
          class="
            ml-3
            px-2
            pb-5
            overflow-hidden
            transition-all
            hover:bg-gray-50 hover:bg-opacity-20
            rounded
            filter
            drop-shadow
          "
        >
          &lsaquo;
        </button>
        <button
          class="
            mr-3
            px-2
            pb-5
            overflow-hidden
            transition-all
            hover:bg-gray-50 hover:bg-opacity-20
            rounded
            filter
            drop-shadow
          "
        >
          &rsaquo;
        </button>
      </div>
      <div class="mt-14 mx-2 p-3 rounded bg-black bg-opacity-60 backdrop-filter backdrop-blur-lg">
        <h1 class="font-bold text-3xl uppercase" id="header-title">Header Title</h1>
        <p class="mt-2">
          <span id="header-description">Header Description</span>
          <a id="header-link" class="underline" href="#" target="_blank">Read article...</a>
        </p>
      </div>
      <div id="header-radio-button-group" class="table my-3 mb-4 select-none">
        <input
          class="mx-1 text-yellow-500 focus:ring-yellow-500"
          type="radio"
          name="header-radio-button"
        />
      </div>
      <img
        id="header-image"
        class="fixed top-0 w-screen h-screen bg-black object-cover select-none z-[-10]"
        title="Header image"
      />
    </header>
    <nav
      id="nav"
      class="
        sticky
        top-0
        h-14
        sm:w-max sm:m-auto
        flex
        justify-between
        items-center
        bg-gray-50 bg-opacity-90
        text-black
        dark:bg-gray-900 dark:bg-opacity-90 dark:text-white
        sm:rounded
        shadow
        backdrop-filter backdrop-blur-md
      "
    >
      <div class="font-bold flex items-center overflow-x-auto">
        <a class="w-14 h-14 flex-shrink-0" href="#"
          ><img
            class="w-14 h-14 sm:rounded-l"
            src="resources/images/fadhsquared-logo.png"
            alt="FADHsquared logo"
        /></a>
        <a class="ml-5 hover:underline" href="html/hermitcraft-8-launch.html">Updates</a>
        <a class="ml-5 hover:underline" href="#">Downloads</a>
        <a class="ml-5 hover:underline" href="#">Misc.</a>
      </div>
      <button id="toggle-dark-mode-button" class="h-6 mx-3.5 border-none active:opacity-60">
        <span class="material-icons-outlined text-2xl">dark_mode</span>
      </button>
    </nav>
    <main class="px-4 bg-white dark:bg-gray-800 dark:text-gray-100">
      <!-- Latest articles section-->
      <section class="pt-2">
        <h2 class="font-bold text-center text-2xl">Latest Articles</h2>
        <div class="w-8 h-1 mx-auto my-2 rounded-sm bg-black dark:bg-gray-100"></div>
        <div class="flex flex-wrap justify-center">
          <div class="article-snippet flex flex-col mx-1 mt-2 w-60 lg:w-96">
            <img class="flex-shrink-0 self-center object-cover" alt="article image" />
            <div class="text-center mt-1">
              <a href="#"
                ><h3 class="font-bold lg:text-lg hover:underline active:opacity-60">
                  Article Snippet Title
                </h3></a
              >
              <p class="text-sm lg:text-base">Article Snippet Description</p>
            </div>
          </div>
        </div>
      </section>
      <!-- VSCode pro tip for IntelliJ look -->
      <section class="pt-4">
        <h2 class="font-bold text-center text-2xl">Pro tip: IntelliJ editor look in VS Code</h2>
        <div class="w-8 h-1 mx-auto mt-2 rounded-sm bg-black dark:bg-gray-100"></div>
        <div class="flex flex-wrap justify-center">
          <embed
            src="html/fake-windows/font-size-13.html"
            type="text/html"
            width="484px"
            height="257px"
          />
          <embed
            src="html/fake-windows/font-size-13.5.html"
            type="text/html"
            width="484px"
            height="257px"
          />
          <embed
            src="html/fake-windows/font-size-14.html"
            type="text/html"
            width="484px"
            height="257px"
          />
        </div>
      </section>
      <!-- Latest videos section -->
      <section>
        <h2 class="font-bold text-center text-2xl">Latest Videos</h2>
        <div class="w-8 h-1 mx-auto my-2 rounded-sm bg-black dark:bg-gray-100"></div>
        <div class="min-w-0 w-max max-w-full mx-auto overflow-x-auto">
          <div
            class="
              thumbnail-info-group
              p-1
              pr-1.5
              my-2
              flex
              rounded
              hover:bg-gray-50
              dark:hover:bg-gray-900
              hover:shadow
            "
          >
            <img
              class="
                flex-shrink-0
                self-center
                mr-2
                w-[128px]
                h-[72px]
                lg:w-[160px] lg:h-[90px]
                object-cover
              "
              alt="thumbnail"
            />
            <div>
              <a href="#" target="_blank"
                ><h3 class="font-bold lg:text-lg hover:underline active:opacity-60">
                  Video Title
                </h3></a
              >
              <p class="text-justify text-sm lg:text-base">Video Description</p>
            </div>
          </div>
        </div>
      </section>
    </main>
    <script src="js/main.js"></script>
    <script>
      "use strict";

      const headerRadioButtons = body
        .querySelector("#header-radio-button-group")
        .getElementsByTagName("input");
      let headerImageElement = body.querySelector("#header-image");
      let currentHeaderNumber;
      let headerSwitchAnimationIsOngoing = false;
      // switchHeader event listeners bound to header radio buttons
      const switchHeader = function (requestedHeaderNumber, headerSwitchAnimationDuration = 250) {
        if (headerSwitchAnimationIsOngoing) {
          headerRadioButtons[currentHeaderNumber].checked = true;
        } else if (requestedHeaderNumber != currentHeaderNumber) {
          currentHeaderNumber = requestedHeaderNumber;
          headerRadioButtons[requestedHeaderNumber].checked = true;
          body.querySelector("#header-title").textContent =
            headerContentList[requestedHeaderNumber].title;
          body.querySelector("#header-description").textContent =
            headerContentList[requestedHeaderNumber].description;
          body.querySelector("#header-link").href =
            headerContentList[requestedHeaderNumber].article_url;
          const requestedHeaderImageElement = preloadedHeaderImages[requestedHeaderNumber];
          headerImageElement.parentNode.appendChild(requestedHeaderImageElement);
          headerSwitchAnimationIsOngoing = true;
          requestedHeaderImageElement.animate(
            {
              opacity: [0, 1],
              easing: ["ease-out"],
            },
            headerSwitchAnimationDuration
          );
          setTimeout(function () {
            headerImageElement.parentNode.removeChild(headerImageElement);
            headerImageElement = body.querySelector("#header-image");
            headerSwitchAnimationIsOngoing = false;
          }, headerSwitchAnimationDuration);
          sessionStorage.sessionCurrentHeaderNumber = String(requestedHeaderNumber);
        }
      };

      const preloadedHeaderImages = [];
      let headerContentList;
      fetch("resources/header-content-list.json")
        .then((response) => response.json())
        .then((fetchedHeaderContentList) => {
          headerContentList = fetchedHeaderContentList;
          duplicateElement(headerRadioButtons[0], fetchedHeaderContentList.length - 1);
          for (let index = 0; index < fetchedHeaderContentList.length; index++) {
            preloadedHeaderImages[index] = headerImageElement.cloneNode(true);
            preloadedHeaderImages[index].src = fetchedHeaderContentList[index].image_url;
            headerRadioButtons[index].addEventListener("click", () => switchHeader(index));
          }
          if (!("sessionCurrentHeaderNumber" in sessionStorage)) {
            sessionStorage.sessionCurrentHeaderNumber = "0";
          }
          switchHeader(parseInt(sessionStorage.sessionCurrentHeaderNumber), 0);
        });
      const cycleHeader = function (cycleTo) {
        const maximumHeaderNumber = headerRadioButtons.length - 1;
        let headerNumber = currentHeaderNumber;
        switch (cycleTo) {
          case "next":
            headerNumber += 1;
            if (headerNumber > maximumHeaderNumber) headerNumber = 0;
            break;
          case "prev":
            headerNumber -= 1;
            if (headerNumber < 0) headerNumber = maximumHeaderNumber;
            break;
        }
        switchHeader(headerNumber);
      };
      const headerCycleButtons = body
        .querySelector("#header-cycle-button-container")
        .getElementsByTagName("button");
      headerCycleButtons[0].addEventListener("click", () => cycleHeader("prev"));
      headerCycleButtons[1].addEventListener("click", () => cycleHeader("next"));

      const articleSnippets = body.getElementsByClassName("article-snippet");
      fetch("resources/article-content-list.json")
        .then((response) => response.json())
        .then((fetchedArticleContentList) => {
          duplicateElement(articleSnippets[0], fetchedArticleContentList.length - 1);
          for (let index = 0; index < articleSnippets.length; index++) {
            articleSnippets[index].querySelector("h3").innerText =
              fetchedArticleContentList[index].header_title;
            articleSnippets[index].querySelector("p").innerText =
              fetchedArticleContentList[index].header_description;
            articleSnippets[index].querySelector("a").href =
              fetchedArticleContentList[index].article_url;
            articleSnippets[index].querySelector("img").src =
              fetchedArticleContentList[index].header_image_url;
          }
        });

      const thumbnailInfoGroup = body.getElementsByClassName("thumbnail-info-group");
      fetch(
        "https://api.allorigins.win/raw?url=https://www.youtube.com/feeds/videos.xml?channel_id=UCkIkjfzUY-32W9K5L56p9jA"
      )
        .then((response) => response.text())
        .then((text) => new DOMParser().parseFromString(text, "text/xml"))
        .then((youtubeFeedXml) => {
          const youtubeFeedEntries = youtubeFeedXml.getElementsByTagName("entry");
          duplicateElement(thumbnailInfoGroup[0], youtubeFeedEntries.length - 1);
          for (let index = 0; index < thumbnailInfoGroup.length; index++) {
            thumbnailInfoGroup[index].querySelector("h3").innerText =
              youtubeFeedEntries[index].querySelector("title").textContent;
            thumbnailInfoGroup[index].querySelector("p").innerText =
              youtubeFeedEntries[index].querySelector("description").textContent;
            thumbnailInfoGroup[index].querySelector("a").href = youtubeFeedEntries[index]
              .querySelector("link")
              .getAttribute("href");
            thumbnailInfoGroup[index].querySelector("img").src = youtubeFeedEntries[index]
              .querySelector("thumbnail")
              .getAttribute("url");
          }
        });
    </script>
  </body>
</html>
